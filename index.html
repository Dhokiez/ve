<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Special for You ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff4d6d;
            --secondary: #ff8fa3;
            --glass: rgba(255, 255, 255, 0.15);
        }

        /* Mengunci seluruh layar agar tidak bisa digeser-geser */
        * { 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
            touch-action: none; /* Mematikan gesture zoom & scroll liar */
        }
        
        html, body {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden; /* Mutlak: tidak boleh ada scrollbar */
            position: fixed; /* Memastikan posisi tetap di viewport */
        }

        body {
            font-family: 'Poppins', sans-serif;
            display: flex; justify-content: center; align-items: center;
            background: #0f0c29;
        }

        .bg-blobs {
            position: absolute; width: 100%; height: 100%;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            z-index: 1;
        }

        .blob {
            position: absolute; width: 250px; height: 250px;
            background: var(--primary);
            filter: blur(80px); border-radius: 50%;
            opacity: 0.3; animation: move 20s infinite alternate;
        }

        @keyframes move {
            from { transform: translate(-10%, -10%); }
            to { transform: translate(100%, 80%); }
        }

        .container {
            position: relative; z-index: 10;
            width: 85%; max-width: 380px;
            padding: 25px; border-radius: 30px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            text-align: center;
            /* Scroll hanya diperbolehkan di dalam box surat jika kepanjangan */
            overflow: visible; 
        }

        .gift-container img {
            width: 100px; border-radius: 15px; margin-bottom: 10px;
        }

        .photo-wrap {
            position: relative; display: none; margin: 0 auto 15px;
            width: 120px; height: 120px;
        }
        .photo-wrap img {
            width: 100%; height: 100%; border-radius: 50%;
            object-fit: cover; border: 4px solid white;
            box-shadow: 0 0 20px var(--primary);
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 77, 109, 0.7); }
            70% { box-shadow: 0 0 20px 15px rgba(255, 77, 109, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 77, 109, 0); }
        }

        h2, h3 {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8em; color: white; margin-bottom: 8px;
            background: linear-gradient(to right, #fff, var(--secondary));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        #letterBody {
            font-size: 0.85em; 
            color: rgba(255,255,255,0.95);
            line-height: 1.6; 
            text-align: left;
            margin-top: 10px; 
            display: none;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px; 
            border-radius: 15px;
            max-height: 180px; /* Batasi agar tidak meledak keluar container */
            overflow-y: auto;
            touch-action: pan-y; /* Hanya izinkan scroll vertikal di sini */
        }

        #userAns {
            background: rgba(255, 255, 255, 0.15); 
            border: 1px solid rgba(255,255,255,0.4);
            border-radius: 12px; padding: 10px; 
            width: 100%; color: white;
            outline: none; margin: 10px 0; text-align: center;
            font-size: 0.9em;
        }

        .btn-group {
            display: flex; justify-content: center; gap: 10px; 
            margin-top: 15px; position: relative;
        }

        button {
            background: linear-gradient(45deg, var(--primary), #ff758f);
            color: white; border: none; padding: 10px 20px;
            border-radius: 25px; font-weight: 600; cursor: pointer;
            font-size: 0.9em;
        }

        #noBtn { 
            background: #555; 
            transition: 0.2s ease;
            position: relative; /* Penting agar tetap dalam koordinat container */
        }

        canvas { position: absolute; top: 0; left: 0; z-index: 5; pointer-events: none; }
        
        #overlay, #ngambek-overlay {
            position: fixed; inset: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
        }
        #overlay { background: #0f0c29; z-index: 1000; padding: 20px; touch-action: none;}
        #ngambek-overlay { background: rgba(0,0,0,0.95); z-index: 2000; display: none; padding: 30px; touch-action: none; }

        .choco-btn {
            background: linear-gradient(45deg, #603813, #b2945e) !important;
            margin-top: 10px; display: none; width: 100%;
        }
    </style>
</head>
<body>

    <div class="bg-blobs">
        <div class="blob" style="top: 10%; left: 5%;"></div>
        <div class="blob" style="bottom: 10%; right: 5%; background: #23a6d5;"></div>
    </div>

    <canvas id="canvas"></canvas>

    <div id="overlay">
        <h1 style="font-family: 'Dancing Script'; font-size: 2.2em; color: white;">Buat Kamu Yang Tersayang...</h1>
        <button onclick="startApp()">Klik untuk Membuka ‚ú®</button>
    </div>

    <div id="ngambek-overlay">
        <img src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExenpjNTBkeW9xdjFpenh1c3Y0MmhsMjVyeHVxcGxlbTl2ajZqZmp0YSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/fFa05KbZowXiEIyRse/giphy.gif" width="180">
        <h2 style="margin-top: 20px; color: white;">IH KOK GITU?! üò≠</h2>
        <p style="color: white;">Pilih "Yes" dong sayang...</p>
        <button onclick="tutupNgambek()">Balik</button>
    </div>

    <div class="container">
        <div id="quiz-section">
            <div class="gift-container">
                <img src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExMGh0bjBsYWg5NTVydzVleXRpdGJoMXQ0ZG5ydmdrcTEwaXBrdXZpYyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/GJACwlJbtiWrYeWoqM/giphy.gif">
            </div>
            <h3>Tebak Tebakan dulu..</h3>
            <p style="color: #eee; font-size: 0.85em;">Apa bedanya kamu sama internet?</p>
            <input type="text" id="userAns" placeholder="Jawabannya apa hayo?" autocomplete="off">
            <button onclick="cekJawaban()">Cek Jawaban</button>
            <p id="hint" style="font-size: 0.75em; margin-top: 10px; color: var(--secondary);"></p>
        </div>

        <div id="choice-section" style="display: none;">
            <div class="gift-container">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExY25nMDBhOTR1Y2k0em04NWdndG44enl0Y3B5Y2VkODYxdGxlZ3NveiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/IzXiddo2twMmdmU8Lv/giphy.gif">
            </div>
            <h3>Jawaban Benar! ‚ú®</h3>
            <p style="color: #eee; font-size: 0.85em;">Tapi yakin mau buka sekarang?</p>
            <div class="btn-group">
                <button onclick="showFinal()">Yes! ‚ù§Ô∏è</button>
                <button id="noBtn" onmouseover="moveNo()" onclick="marahEffect()" ontouchstart="moveNo()">Gak Mau üòú</button>
            </div>
        </div>

        <div id="main-content" style="display: none;">
            <div class="photo-wrap" id="photoWrap">
                <img src="ve.jpg" alt="Sayang">
            </div>
            <div id="letterTitle"></div>
            <div id="letterBody"></div>
            <button id="chocoBtn" class="choco-btn" onclick="window.location.href='choco.html'">Nih Cokelat Buat Kamu üç´</button>
        </div>
    </div>

    <audio id="bgm" loop>
        <source src="Troye Sivan - Angel Baby.mp3" type="audio/mpeg">
    </audio>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];

    function initCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', initCanvas);
    initCanvas();

    class Heart {
        constructor(x, y) {
            this.x = x; this.y = y;
            this.size = Math.random() * 8 + 4;
            this.speedX = (Math.random() - 0.5) * 6;
            this.speedY = (Math.random() - 0.5) * 6;
            this.opacity = 1;
        }
        update() { this.x += this.speedX; this.y += this.speedY; this.opacity -= 0.015; }
        draw() {
            ctx.globalAlpha = this.opacity;
            ctx.fillStyle = "#ff4d6d"; ctx.beginPath();
            ctx.moveTo(this.x, this.y);
            ctx.bezierCurveTo(this.x-this.size, this.y-this.size, this.x-this.size*1.5, this.y+this.size/2, this.x, this.y+this.size);
            ctx.bezierCurveTo(this.x+this.size*1.5, this.y+this.size/2, this.x+this.size, this.y-this.size, this.x, this.y);
            ctx.fill();
        }
    }

    function explode() {
        for(let i=0; i<20; i++) particles.push(new Heart(window.innerWidth/2, window.innerHeight/2));
    }

    function animate() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        particles.forEach((p,i) => { p.update(); p.draw(); if(p.opacity<=0) particles.splice(i,1); });
        requestAnimationFrame(animate);
    }
    animate();

    function startApp() {
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('bgm').play();
    }

    function cekJawaban() {
        const val = document.getElementById('userAns').value.toLowerCase();
        if(val.includes("me") || val.includes("aku") || val.includes("for")){
            document.getElementById('quiz-section').style.display = 'none';
            document.getElementById('choice-section').style.display = 'block';
            explode();
        } else {
            document.getElementById('hint').innerText = "Clue: Kalau internet itu 4G, kalau kamu itu for...";
        }
    }

    // MEMBATASI LOMPATAN TOMBOL AGAR TETAP DI DALAM BOX
    function moveNo() {
        const noBtn = document.getElementById('noBtn');
        const x = Math.random() * 80 - 40; 
        const y = Math.random() * 40 - 20;
        noBtn.style.transform = `translate(${x}px, ${y}px)`;
    }

    function marahEffect() {
        document.getElementById('ngambek-overlay').style.display = 'flex';
    }

    function tutupNgambek() {
        document.getElementById('ngambek-overlay').style.display = 'none';
        document.getElementById('noBtn').style.transform = `translate(0px, 0px)`; 
    }

    function showFinal() {
        explode();
        document.getElementById('choice-section').style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
        document.getElementById('photoWrap').style.display = 'block';
        document.getElementById('letterBody').style.display = 'block';
        
        const titleText = "I Love You! ‚ù§Ô∏è";
        const bodyText = "Happy Valentine's Day, Sayang! ‚ù§Ô∏è\n\nSemoga di hari yang penuh kasih sayang ini, kamu selalu bahagia, makin deket, dan makin saling mengerti üíï.\n\nSemangat terus menjalani harinya, aku bakal selalu support kamu‚ú®. Makasih ya udah nemenin aku sampai hari ini. Kamu adalah hal paling estetik yang pernah ada di hidupku.\n\nSemoga kita terus bareng-bareng ya. I love you more than anything can't express‚ú®\n\nWleeeüòú";
        
        let j = 0;
        function typeTitle() {
            if(j < titleText.length) {
                document.getElementById('letterTitle').innerHTML += `<h2 style="display:inline">${titleText.charAt(j)}</h2>`;
                j++; setTimeout(typeTitle, 100);
            } else { typeBody(); }
        }

        let i = 0;
        function typeBody() {
            if(i < bodyText.length) {
                document.getElementById('letterBody').innerHTML += bodyText.charAt(i);
                document.getElementById('letterBody').scrollTop = document.getElementById('letterBody').scrollHeight;
                i++; setTimeout(typeBody, 45);
            } else {
                document.getElementById('chocoBtn').style.display = 'block';
            }
        }
        typeTitle();
        setInterval(explode, 2500);
    }
</script>
</body>
</html>
